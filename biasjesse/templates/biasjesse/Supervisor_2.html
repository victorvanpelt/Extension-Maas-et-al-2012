{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
    How to split the bonus pool?
{% endblock %}

{% block content %}
{% if group.info == 1 %}

    <div class="card card-body bg-light instructions">
        <ul>
            <li>You offered {{ group.pricepay | floatformat:2 }} Lira and the actual price was {{ group.price_random | floatformat:2 }} Lira.</li>
            <li>Thus, you will pay {{ group.actualpricepay | floatformat:2 }} Lira, and get the information. Please see the information below:</li>
            <li>Manager A invested {{ group.effort_a | floatformat:0 }} out of 10 Lira.</li>
            <li>Manager B invested {{ group.effort_b | floatformat:0 }} out of 10 Lira.</li>
            <li>the bonus pool is <span id="pool_nummer">{{ group.pool | floatformat:2 }}</span> Lira.</li>
        </ul>
    </div>
    <br>

{% else %}

    <div class="card card-body bg-light instructions">
        <ul>
            <li>You offered {{ group.pricepay | floatformat:2 }} Lira and the actual price was {{ group.price_random | floatformat:2 }} Lira.</li>
            <li>Thus, you not get the information and not pay anything</li>
            <li>the bonus pool is <span id="pool_nummer">{{ group.pool | floatformat:2 }}</span> Lira.</li>
        </ul>
    </div>
    <br>

{% endif %}
    <input type="hidden" name="check_allocation" value="" id="check_allocation"/>

    <p align="center">Please choose how to allocate the bonus pool in percentages):</p>
    <b><p id="demo1" align="center"><br></p></b>
    <div align="center">
    {% formfield group.allocation_b label=None %}
    </div>

    {% next_button %}

{% endblock %}

{% block scripts %}
    <script>
        $('input[name=allocation_b]').on('input', function() {
            var emp_two_perc = $(this).val();
            var emp_one_perc = 100 - emp_two_perc;
            var emp_two = {{ group.pool }} * emp_two_perc/100;
            var emp_one = {{ group.pool }} * emp_one_perc/100;
            document.getElementById("demo1").innerHTML = emp_one + ' Lira ('+ emp_one_perc +' %) for A and ' + emp_two + ' Lira ('+emp_two_perc+' %) for B.';
            $('#check_allocation').val(1);
        });
    </script>
{% endblock %}
